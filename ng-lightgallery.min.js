angular.module("ngLightgallery",[]).factory("$lightGallery",["$q",function(b){var a={};a.open=function(h){var c=h.images||[];var i=h.currentImage||h.current;var g=h.index;var e=h.container||"body";if(!g&&g!==0&&i){g=c.indexOf(i)}else{g=0}c=c.map(function(k){var j={};if(_.isString(k)){j.src=k;j.thumb=k}else{if(_.isObject(k)){j.src=k.url||k.src;j.thumb=k.thumb||j.src}}return j});var d=angular.element(e);var f={};_.merge(f,h.lgoptions);f.dynamic=true;f.index=g;f.dynamicEl=c;if(c.length){d.lightGallery(f);d.one("onCloseAfter.lg",function(){d.data("lightGallery").destroy(true)})}return d};return a}]).directive("viewImage",["$lightGallery",function(a){return{restrict:"A",link:function(c,e,d){var b;e.on("click",function(g){var f=c.$eval(d.viewImage)||{};if(!f.images&&e.attr("src")){f.images=[e.attr("src")];f.index=0}c.$apply(function(){b=a.open(f)})});e.on("$destroy",function(){if(b&&b.data("lightGallery")){b.data("lightGallery").destroy(true)}})}}}]);